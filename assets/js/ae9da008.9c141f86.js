"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1267],{4137:function(t,e,n){n.d(e,{Zo:function(){return k},kt:function(){return o}});var l=n(7294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,l)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e){if(null==t)return{};var n,l,a=function(t,e){if(null==t)return{};var n,l,a={},p=Object.keys(t);for(l=0;l<p.length;l++)n=p[l],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(t);for(l=0;l<p.length;l++)n=p[l],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var c=l.createContext({}),m=function(t){var e=l.useContext(c),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},k=function(t){var e=m(t.components);return l.createElement(c.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return l.createElement(l.Fragment,{},e)}},u=l.forwardRef((function(t,e){var n=t.components,a=t.mdxType,p=t.originalType,c=t.parentName,k=r(t,["components","mdxType","originalType","parentName"]),u=m(n),o=a,s=u["".concat(c,".").concat(o)]||u[o]||d[o]||p;return n?l.createElement(s,i(i({ref:e},k),{},{components:n})):l.createElement(s,i({ref:e},k))}));function o(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var p=n.length,i=new Array(p);i[0]=u;var r={};for(var c in e)hasOwnProperty.call(e,c)&&(r[c]=e[c]);r.originalType=t,r.mdxType="string"==typeof t?t:a,i[1]=r;for(var m=2;m<p;m++)i[m]=n[m];return l.createElement.apply(null,i)}return l.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2566:function(t,e,n){n.r(e),n.d(e,{assets:function(){return k},contentTitle:function(){return c},default:function(){return o},frontMatter:function(){return r},metadata:function(){return m},toc:function(){return d}});var l=n(3117),a=n(102),p=(n(7294),n(4137)),i=["components"],r={id:"zdyzlinuxarch",slug:"/zdyzlinuxarch",title:"I.MX6U\u5b66\u4e60\u7b14\u8bb0\u88f8\u673a\u7bc7",authors:"pansyhou"},c=void 0,m={unversionedId:"skill/Linux/zdyzlinuxarch",id:"skill/Linux/zdyzlinuxarch",title:"I.MX6U\u5b66\u4e60\u7b14\u8bb0\u88f8\u673a\u7bc7",description:"\u770b\u4e86\u770b\u5ef7\u5ef7\u7684\u7b14\u8bb0\uff0c\u6211\u611f\u89c9\u6211\u7684\u5b66\u4e60\u65b9\u6cd5\u8fd8\u662f\u6709\u70b9\u5dee\u52b2\uff0c\u4e0d\u77e5\u9053\u6548\u7387\u600e\u4e48\u6837\uff0c\u4f46\u662f\u8d28\u91cf\u80af\u5b9a\u662f\u5dee",source:"@site/docs/skill/Linux/\u6b63\u70b9\u539f\u5b50.md",sourceDirName:"skill/Linux",slug:"/zdyzlinuxarch",permalink:"/docs/zdyzlinuxarch",draft:!1,tags:[],version:"current",frontMatter:{id:"zdyzlinuxarch",slug:"/zdyzlinuxarch",title:"I.MX6U\u5b66\u4e60\u7b14\u8bb0\u88f8\u673a\u7bc7",authors:"pansyhou"},sidebar:"skill",previous:{title:"\u6570\u5b57\u7cfb\u7edf\u57fa\u7840\u7b14\u8bb0",permalink:"/docs/digit-system"},next:{title:"keyboardSetting",permalink:"/docs/keyboardSetting"}},k={},d=[{value:"\u6587\u4ef6\u5939\u8f6f\u8fde\u63a5",id:"\u6587\u4ef6\u5939\u8f6f\u8fde\u63a5",level:3},{value:"Makefile",id:"makefile",level:2},{value:"\u8d4b\u503c\u7b26",id:"\u8d4b\u503c\u7b26",level:3},{value:"\u81ea\u52a8\u5316\u53d8\u91cf",id:"\u81ea\u52a8\u5316\u53d8\u91cf",level:3},{value:"\u4f2a\u76ee\u6807",id:"\u4f2a\u76ee\u6807",level:3},{value:"I.MX6U \u67b6\u6784",id:"imx6u-\u67b6\u6784",level:2},{value:"A7\u5bc4\u5b58\u5668\u7ec4",id:"a7\u5bc4\u5b58\u5668\u7ec4",level:3},{value:"\u901a\u7528\u5bc4\u5b58\u5668",id:"\u901a\u7528\u5bc4\u5b58\u5668",level:4},{value:"\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668",id:"\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668",level:4},{value:"IO\u521d\u59cb\u5316",id:"io\u521d\u59cb\u5316",level:3},{value:"Chapter 18: Clock Controller Module(CCM)",id:"chapter-18-clock-controller-moduleccm",level:4},{value:"\u4e0a\u673a",id:"\u4e0a\u673a",level:3},{value:"arm-linux-gnueabihf-objdump \u53cd\u6c47\u7f16",id:"arm-linux-gnueabihf-objdump-\u53cd\u6c47\u7f16",level:4},{value:"\u542f\u52a8\u65b9\u5f0f",id:"\u542f\u52a8\u65b9\u5f0f",level:3},{value:"\u5185\u90e8Boot\u6a21\u5f0f",id:"\u5185\u90e8boot\u6a21\u5f0f",level:4},{value:"\u955c\u50cf\u70e7\u5199",id:"\u955c\u50cf\u70e7\u5199",level:4},{value:"DCD\u6570\u636e",id:"dcd\u6570\u636e",level:4},{value:"\u94fe\u63a5\u811a\u672c",id:"\u94fe\u63a5\u811a\u672c",level:4},{value:"\u79fb\u690d\u5b98\u65b9SDK",id:"\u79fb\u690d\u5b98\u65b9sdk",level:3},{value:"\u8bbe\u7f6eIO\u590d\u7528",id:"\u8bbe\u7f6eio\u590d\u7528",level:4},{value:"\u5347\u7ea7\u5de5\u7a0b\u6a21\u677f",id:"\u5347\u7ea7\u5de5\u7a0b\u6a21\u677f",level:3},{value:"\u4e3b\u9891\u4e0e\u65f6\u949f",id:"\u4e3b\u9891\u4e0e\u65f6\u949f",level:3},{value:"7\u8defPLL\u65f6\u949f\u6e90",id:"7\u8defpll\u65f6\u949f\u6e90",level:4},{value:"\u5185\u6838\u65f6\u949f\u8bbe\u7f6e",id:"\u5185\u6838\u65f6\u949f\u8bbe\u7f6e",level:4},{value:"PFD\u9891\u7387",id:"pfd\u9891\u7387",level:4},{value:"AHB\u3001IPG \u548c  PERCLK \u6839\u65f6\u949f\u8bbe\u7f6e",id:"ahbipg-\u548c--perclk-\u6839\u65f6\u949f\u8bbe\u7f6e",level:4},{value:"\u4e2d\u65ad\u7cfb\u7edf",id:"\u4e2d\u65ad\u7cfb\u7edf",level:3},{value:"\u4e2d\u65ad\u5206\u7c7b",id:"\u4e2d\u65ad\u5206\u7c7b",level:4},{value:"\u4e2d\u65adID",id:"\u4e2d\u65adid",level:4},{value:"CP15\u534f\u5904\u7406\u5668",id:"cp15\u534f\u5904\u7406\u5668",level:4},{value:"\u4e2d\u65ad\u4f7f\u80fd",id:"\u4e2d\u65ad\u4f7f\u80fd",level:4},{value:"\u4e2d\u65ad\u4f18\u5148\u7ea7",id:"\u4e2d\u65ad\u4f18\u5148\u7ea7",level:4},{value:"\u62a2\u5360\u4f18\u5148\u7ea7\u548c\u5b50\u4f18\u5148\u7ea7\u7684\u4f4d\u6570\u8bbe\u7f6e",id:"\u62a2\u5360\u4f18\u5148\u7ea7\u548c\u5b50\u4f18\u5148\u7ea7\u7684\u4f4d\u6570\u8bbe\u7f6e",level:5},{value:"\u79fb\u690dSDKcore_ca7.h",id:"\u79fb\u690dsdkcore_ca7h",level:4}],u={toc:d};function o(t){var e=t.components,n=(0,a.Z)(t,i);return(0,p.kt)("wrapper",(0,l.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"\u770b\u4e86\u770b\u5ef7\u5ef7\u7684\u7b14\u8bb0\uff0c\u6211\u611f\u89c9\u6211\u7684\u5b66\u4e60\u65b9\u6cd5\u8fd8\u662f\u6709\u70b9\u5dee\u52b2\uff0c\u4e0d\u77e5\u9053\u6548\u7387\u600e\u4e48\u6837\uff0c\u4f46\u662f\u8d28\u91cf\u80af\u5b9a\u662f\u5dee"),(0,p.kt)("p",null,"\u4e0e\u5176\u591a\u6b21\u91cd\u590d\u5b66\u4e60\u6d17\u8111\uff0c\u4e0d\u5982\u6559\u522b\u4eba\u6765\u7684\u5feb"),(0,p.kt)("h3",{id:"\u6587\u4ef6\u5939\u8f6f\u8fde\u63a5"},"\u6587\u4ef6\u5939\u8f6f\u8fde\u63a5"),(0,p.kt)("p",null,"ls -s src dsn"),(0,p.kt)("h2",{id:"makefile"},"Makefile"),(0,p.kt)("p",null,"\u6ce8\u610f\u7f29\u8fdb\u4e3atab"),(0,p.kt)("h3",{id:"\u8d4b\u503c\u7b26"},"\u8d4b\u503c\u7b26"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"\u8d4b\u503c\u7b26",(0,p.kt)("inlineCode",{parentName:"p"},"="),"\uff1a\u4f1a\u9ed8\u8ba4\u7528\u6700\u665a\u6539\uff08\u5b9a\u4e49\uff09\u7684\u90a3\u4e2a\u53d8\u91cf")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},":="),"\uff1a\u4f1a\u9ed8\u8ba4\u7528\u6700\u5f00\u59cb\u5b9a\u4e49\u7684\u53d8\u91cf")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"?="),"\uff1a\u662f\u4e00\u4e2a\u5f88\u6709\u7528\u7684\u8d4b\u503c\u7b26\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u884c\u4ee3\u7801\uff1a"),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre"},"curname ?= zuozhongkai\n")),(0,p.kt)("p",{parentName:"li"},"\u5982\u679c\u53d8\u91cf curname \u524d\u9762\u6ca1\u6709\u88ab\u8d4b\u503c\uff0c\u90a3\u4e48\u6b64\u53d8\u91cf\u5c31\u662f\u201czuozhongkai\u201d\uff0c\u5982\u679c\u524d\u9762\u5df2\u7ecf\u8d4b\u8fc7\u503c\u4e86\uff0c\u90a3\u4e48\u5c31\u4f7f\u7528\u524d\u9762\u8d4b\u7684\u503c\u3002")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"+="),"\uff1a\u53d8\u91cf\u8ffd\u52a0"))),(0,p.kt)("h3",{id:"\u81ea\u52a8\u5316\u53d8\u91cf"},"\u81ea\u52a8\u5316\u53d8\u91cf"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64be05071ddac507cc91a717",alt:"image-20230724125839732"})),(0,p.kt)("h3",{id:"\u4f2a\u76ee\u6807"},"\u4f2a\u76ee\u6807"),(0,p.kt)("p",null,"\u4f2a\u76ee\u6807\u4e0d\u4ee3\u8868\u771f\u6b63\u7684\u76ee\u6807\u540d\uff0c\u5728\u6267\u884c make \u547d\u4ee4\u901a\u8fc7\u6307\u5b9a\u4f2a\u76ee\u6807\uff0c\u53bb\u6267\u884c\u81ea\u5df1\u60f3\u6267\u884c\u7684\u547d\u4ee4\u3002"),(0,p.kt)("p",null,"\u5982\u679c\u8bf4\u6587\u4ef6\u5939\u91cc\u4e5f\u6709\u540c\u6837\u7684\u6587\u4ef6\u6bd4\u5982clean\uff0c\u56e0\u4e3aclean\u6ca1\u6709\u4f9d\u8d56\u6587\u4ef6\uff0cmake clean\u4f1a\u8ba4\u4e3aclean\u662f\u6700\u65b0\u7684\uff0c\u800cMakefile\u91cc\u7684\u547d\u4ee4\u6267\u884c\u4e0d\u4e86"),(0,p.kt)("p",null,"\u4e3a\u4e86\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 clean \u58f0\u660e\u4e3a\u4f2a\u76ee\u6807\uff0c\u58f0\u660e\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},".PHONY : clean\n")),(0,p.kt)("h2",{id:"imx6u-\u67b6\u6784"},"I.MX6U \u67b6\u6784"),(0,p.kt)("p",null,"\u8fd9\u5bb6\u4f19\u4e0e\u6211\u4eec\u5e73\u65f6\u7528\u7684stm32\u4e5f\u6ca1\u6709\u8bf4\u6709\u5565\u5927\u7684\u533a\u522b\u5427\uff0c\u5b66\u5b8c\u8fd9\u5bb6\u4f19\u4e4b\u540e\u53ef\u80fd\u8f6crsicv\u9700\u8981\u70b9\u65f6\u95f4\uff0c\u4f46\u662f\u60f3\u628a\u4ed6\u5b66\u624e\u5b9e\u70b9"),(0,p.kt)("p",null,"\u8fd9\u5bb6\u4f19\u7528\u7684\u662fcortex-A\u7cfb\u5217\u7684\u5185\u6838\uff0cA7\uff0c\u542c\u8bf4\u56db\u4e2aA7\u80fd\u6709865\u4e00\u6837\u6027\u80fd"),(0,p.kt)("p",null,"\u53ef\u4ee5\u9605\u8bfbARM\u7684\u624b\u518c"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf65a61ddac507ccacba68",alt:"image-20230725140311076"})),(0,p.kt)("p",null,"\u6ca1\u6709\u5b9e\u9645\u5e94\u7528\u8fc7\u8fd9\u51e0\u79cd\u6a21\u5f0f\uff0c\u4e0d\u597d\u8bc4\uff0c\u53ea\u77e5\u9053\u6bcf\u4e00\u79cd\u6a21\u5f0f\u90fd\u6709\u4e00\u7ec4\u5bc4\u5b58\u5668\u4f9b\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u4f7f\u7528\uff0c\u6062\u590d"),(0,p.kt)("h3",{id:"a7\u5bc4\u5b58\u5668\u7ec4"},"A7\u5bc4\u5b58\u5668\u7ec4"),(0,p.kt)("p",null,"16 \u4e2a 32 \u4f4d\u7684\u901a\u7528\u5bc4\u5b58\u5668(R0~R15)\u4f9b\u8f6f\u4ef6\u4f7f\u7528\uff0c\u524d 15 \u4e2a(R0~R14)\u53ef\u4ee5\u7528\u4f5c\u901a\u7528\u7684\u6570\u636e\u5b58\u50a8\uff0cR15 \u662f\u7a0b\u5e8f\u8ba1\u6570\u5668 PC\uff0c\u7528\u6765\u4fdd\u5b58\u5c06\u8981\u6267\u884c\u7684\u6307\u4ee4\u3002"),(0,p.kt)("p",null,"ARM \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f53\u524d\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668 CPSR \u548c\u4e00\u4e2a\u5907\u4efd\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668 SPSR\uff0cSPSR \u5bc4\u5b58\u5668\u5c31\u662f CPSR \u5bc4\u5b58\u5668\u7684\n\u5907\u4efd"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf66861ddac507ccae559d",alt:"image-20230725140701726"})),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf66f91ddac507ccaf172b",alt:"image-20230725140857103"})),(0,p.kt)("h4",{id:"\u901a\u7528\u5bc4\u5b58\u5668"},"\u901a\u7528\u5bc4\u5b58\u5668"),(0,p.kt)("p",null,"R0~R15 \u5c31\u662f\u901a\u7528\u5bc4\u5b58\u5668\uff0c\u901a\u7528\u5bc4\u5b58\u5668\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u4e09\u7c7b"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},"\u672a\u5907\u4efd\u5bc4\u5b58\u5668"),(0,p.kt)("li",{parentName:"ol"},"\u5907\u4efd\u5bc4\u5b58\u5668"),(0,p.kt)("li",{parentName:"ol"},"\u7a0b\u5e8f\u8ba1\u6570\u5668PC")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"\u672a\u5907\u4efd\u5bc4\u5b58\u5668"),"\u4e5f\u5c31\u662fR0-R7\uff0c\u51e0\u4e2a\u6a21\u5f0f\u90fd\u5171\u7528\u540c\u4e00\u5957\u7269\u7406\u5bc4\u5b58\u5668\uff0c\u5982\u679c\u5207\u6362\u6a21\u5f0f\uff0c\u53ef\u80fd\u4f1a\u88ab\u91cd\u65b0\u5199\u6389\uff0c\u6240\u4ee5\u6ca1\u6709\u7279\u6b8a\u7528\u9014"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"\u5907\u4efd\u5bc4\u5b58\u5668"),"R8-R12\u6709\u4e24\u79cd\u7269\u7406\u5bc4\u5b58\u5668\uff0c\u4e00\u79cd\u662f\u7ed9FIQ\u5feb\u901f\u8bf7\u6c42\u4e2d\u65ad\u7684\uff0c\u53e6\u4e00\u79cd\u662f\u901a\u7528\u7684\uff08\u770b\u4e0a\u56fe"),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"FIQ \u6a21\u5f0f\u4e0b\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u53ef\u4ee5\u4f7f\u7528 R8~R12 \u5bc4\u5b58\u5668\uff0c\u56e0\u4e3a FIQ \u6a21\u5f0f\u4e0b\u7684 R8~R12 \u662f\u72ec\u7acb\u7684\uff0c\u56e0\u6b64\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u53ef\u4ee5",(0,p.kt)("strong",{parentName:"p"},"\u4e0d\u7528\u6267\u884c\u4fdd\u5b58\u548c\u6062\u590d\u4e2d\u65ad\u73b0\u573a\u7684\u6307\u4ee4"),"\uff0c\u4ece\u800c\u52a0\u901f\u4e2d\u65ad\u7684\u6267\u884c\u8fc7\u7a0b\u3002")),(0,p.kt)("p",null,"\u867d\u7136\u8bf4\u6211\u4e0d\u660e\u767dfiq\u540e\u4e3a\u4ec0\u4e48\u4e0d\u7528\u4fdd\u5b58\u73b0\u573a\u554a\uff0c\u6211\u731c\u662f\u56e0\u4e3a\u7528\u4e86\u53e6\u5916\u4e00\u5957\uff0c\u6240\u4ee5\u539f\u6709\u7684\u5907\u4efd\u5bc4\u5b58\u5668\u53ef\u4ee5\u4e0d\u88ab\u4e2d\u65ad\u6240\u7528\uff0c\u4e2d\u65ad\u8fd4\u56de\u540e\u8fd8\u662f\u539f\u6709\u7684\u6570\u636e"),(0,p.kt)("p",null,"\u5230\u4e86R13\u7684",(0,p.kt)("inlineCode",{parentName:"p"},"SP\u6808\u6307\u9488\u5bc4\u5b58\u5668"),"\uff08\u8fd8\u662f\u5907\u4efd\u5bc4\u5b58\u5668\uff09\uff0c\u67098\u4e2a\uff0c1\u4e2a\u662f\u901a\u7528\u7684\uff0c\u53e6\u59167\u4e2a\u662f7\u4e2a\u6a21\u5f0f\u4e0b\u7684\u3002"),(0,p.kt)("p",null,"R14",(0,p.kt)("inlineCode",{parentName:"p"},"LR\u94fe\u63a5\u5bc4\u5b58\u5668"),"\u67097\u4e2a\u5bc4\u5b58\u5668\uff0c\u4e00\u4e2a\u662f\u7528\u6237\u6a21\u5f0f(User)\u3001\u7cfb\u7edf\u6a21\u5f0f(Sys)\u548c\u8d85\u7ea7\u76d1\u89c6\u6a21\u5f0f(Hyp)\u6240\u5171\u6709\u7684\uff0c\u5269\u4e0b\u7684 6 \u4e2a\u5206\u522b\u5bf9\u5e94 6 \u79cd\u4e0d\u540c\u7684\u6a21\u5f0f\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"LR\u94fe\u63a5\u5bc4\u5b58\u5668"),"\u7684\u7528\u9014\uff1a",(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf81491ddac507ccdf281d",alt:"image-20230725160113395"})),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"R15\u7a0b\u5e8f\u8ba1\u6570\u5668"),"\uff1a\u5b66\u8fc7\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406\u7684\u5e94\u8be5\u4e86\u89e3\u8fc7\u6d41\u6c34\u7ebf\uff0c\u56e0\u4e3a\u6d41\u6c34\u7ebf\u7684\u7f18\u6545\uff0cPC\u4f1a\u6bd4\u73b0\u5728\u6267\u884c\u7684\u5730\u65b9\u52a0\u591a8\u4e2a",(0,p.kt)("strong",{parentName:"p"},"\u5b57\u8282")),(0,p.kt)("p",null,"ARM \u5904\u7406\u5668 3 \u7ea7\u6d41\u6c34\u7ebf\uff1a\u53d6\u6307->\u8bd1\u7801->\u6267\u884c\uff0c\u8fd9\u4e09\u7ea7\u6d41\u6c34\u7ebf\u5faa\u73af\u6267\u884c\uff0c \u6bd4\u5982\u5f53\u524d\u6b63\u5728\u6267\u884c\u7b2c\u4e00\u6761\u6307\u4ee4\u7684\u540c\u65f6\u4e5f\u5bf9\u7b2c\u4e8c\u6761\u6307\u4ee4\u8fdb\u884c\u8bd1\u7801\uff0c\u7b2c\u4e09\u6761\u6307\u4ee4\u4e5f\u540c\u65f6\u88ab\u53d6\u51fa\u5b58\u653e \u5728 R15(PC)\u4e2d\u3002\u6211\u4eec\u559c\u6b22\u4ee5\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u6307\u4ee4\u4f5c\u4e3a\u53c2\u8003\u70b9\uff0c\u4e5f\u5c31\u662f\u4ee5\u7b2c\u4e00\u6761\u6307\u4ee4\u4e3a\u53c2\u8003\u70b9\uff0c \u90a3\u4e48 R15(PC)\u4e2d\u5b58\u653e\u7684\u5c31\u662f\u7b2c\u4e09\u6761\u6307\u4ee4\uff0c\u6362\u53e5\u8bdd\u8bf4\u5c31\u662f R15(PC)\u603b\u662f\u6307\u5411\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u6307\u4ee4\u5730\u5740\u518d\u52a0\u4e0a 2 \u6761\u6307\u4ee4\u7684\u5730\u5740\u3002\u5bf9\u4e8e 32 \u4f4d\u7684 ARM \u5904\u7406\u5668\uff0c\u6bcf\u6761\u6307\u4ee4\u662f 4 \u4e2a\u5b57\u8282\uff0c\u6240\u4ee5:"),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"R15 (PC)\u503c    = \u5f53\u524d\u6267\u884c\u7684\u7a0b\u5e8f\u4f4d\u7f6e    + 8 \u4e2a\u5b57\u8282\u3002")),(0,p.kt)("h4",{id:"\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668"},"\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},(0,p.kt)("img",{parentName:"strong",src:"https://pic.imgdb.cn/item/64bf84101ddac507cce59322",alt:"image-20230725161304387"}))),(0,p.kt)("p",null,"CPSR\u53ea\u6709\u4e00\u4e2a\u7269\u7406\u5bc4\u5b58\u5668\uff0c\u6240\u4ee5\u5bb9\u6613\u88ab\u7206\u91d1\u5e01\uff0c\u6545\u6709SPSR\u5907\u4efd\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668"),(0,p.kt)("p",null,"User\u548cSys\u5171\u7528\u4e00\u5957\u5907\u4efd\u72b6\u6001\u5bc4\u5b58\u5668\uff0c\u5176\u4f596\u4e2a\u6a21\u5f0f\u6bcf\u4e2a\u4e00\u4e2a\u5907\u4efd\u5bc4\u5b58\u5668"),(0,p.kt)("p",null,"\u524d\u534a\u90e8\u5206\u4e0eALU\u8ba1\u7b97\u6ea2\u51fa\u6709\u5173\uff08\u53ef\u80fd\u662fALU\u5427\uff0c\u53cd\u6b63\u5c31\u662f\u6ea2\u51fa\u76f8\u5173\uff09\uff0c\u6240\u4ee5\u53ea\u5199\u4e00\u90e8\u5206\u7684"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"I(bit7)"),"\uff1aI=1 \u7981\u6b62 IRQ\uff0cI=0 \u4f7f\u80fd IRQ\u3002 "),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"F(bit6)"),"\uff1aF=1 \u7981\u6b62 FIQ\uff0cF=0 \u4f7f\u80fd FIQ\u3002"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"T(bit5)"),"\uff1a\u63a7\u5236\u6307\u4ee4\u6267\u884c\u72b6\u6001\uff0c\u8868\u660e\u672c\u6307\u4ee4\u662f ARM \u6307\u4ee4\u8fd8\u662f  Thumb \u6307\u4ee4\uff0c",(0,p.kt)("del",{parentName:"p"},"\u901a\u5e38\u548c  J(bit24)\u4e00 \u8d77\u8868\u660e\u6307\u4ee4\u7c7b\u578b\uff0c\u53c2\u8003  J(bit24)\u4f4d\u3002")),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf855e1ddac507cce7f489",alt:"image-20230725161838758"})),(0,p.kt)("admonition",{title:"\u603b\u7ed3",type:"tip"},(0,p.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0a\u7684\uff0c\u53ef\u80fd\u5e72\u770b\u6ca1\u5565\u611f\u89c9\uff0c\u56e0\u4e3astm32\u8c8c\u4f3c\u5c31\u4e24\u79cd\u72b6\u6001\uff0c\u800c\u4e14\u4e5f\u6ca1\u6709\u81ea\u5df1\u5199\u64cd\u4f5c\u7cfb\u7edf"),(0,p.kt)("p",{parentName:"admonition"},"\u6240\u4ee5\uff0c\u5927\u6982\u770b\u4e00\u4e0b\u5c31\u597d\u4e86\uff0c\u7136\u540e\u8bb0\u5f97\u6709\u8fd9\u4e9b\u6807\u5fd7\u4f4d\uff0c\u53ef\u80fd\u4e0d\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\uff08\u6bd4\u5982\u8bf4\u81ea\u5df1\u5199rtos\u7684\u65f6\u5019\u5207\u6362\u6a21\u5f0f\uff1fdebug\u7684\u65f6\u5019\u6253\u5370\u5bc4\u5b58\u5668\uff1fidk")),(0,p.kt)("h3",{id:"io\u521d\u59cb\u5316"},"IO\u521d\u59cb\u5316"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},"\u4f7f\u80fd\u65f6\u949f"),(0,p.kt)("li",{parentName:"ol"},"\u8bbe\u7f6eIO\u590d\u7528"),(0,p.kt)("li",{parentName:"ol"},"\u8c03\u6574IO\u7535\u6c14\u5c5e\u6027")),(0,p.kt)("p",null,"\u968f\u4fbf\u62bd\u53d6\u4e00\u4f4d\u5e78\u8fd0IO\u6765\u770b\u770b\u5bc4\u5b58\u5668"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf895a1ddac507ccee6c85",alt:"image-20230725163538657"})),(0,p.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u8fd8\u662f\u6709\u5f88\u591a\u7684\uff0c\u6ce8\u610fPAD\u548cMUX\u7684\u533a\u522b"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf88ee1ddac507ccedbdd3",alt:"image-20230725163348845"})),(0,p.kt)("p",null,"\u6211\u4eec\u4e3b\u8981\u805a\u7126\u4e8e\u53ef\u80fd\u7528\u7684\u4e0a\u7684\u7535\u6c14\u5c5e\u6027"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"PUS\uff08bit15-14\uff09"),"\uff1apush\uff0c\u8bbe\u7f6e\u4e0a\u62c9\u7535\u963b"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf89b81ddac507cceef2bd",alt:"image-20230725163712187"})),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"ODE(bit11)"),"\uff1a\u5bf9\u5e94\u56fe  8.1.4.2 \u4e2d\u7684 ODE\uff0c\u5f53 IO \u4f5c\u4e3a\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u6b64\u4f4d\u7528\u6765\u7981\u6b62\u6216\u8005\u4f7f\u80fd\u5f00\u8def\u8f93\u51fa\uff0c\u6b64\u4f4d\u4e3a  0 \u7684\u65f6\u5019\u7981\u6b62\u5f00\u8def\u8f93\u51fa\uff0c\u5f53\u6b64\u4f4d\u4e3a  1 \u7684\u65f6\u5019\u5c31\u4f7f\u80fd\u5f00\u8def\u8f93\u51fa\u529f\u80fd\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"SPEED(bit7:6)"),"\uff1a\u5bf9\u5e94\u56fe  8.1.4.2 \u4e2d\u7684  SPEED\uff0c\u5f53 IO \u7528\u4f5c\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u6b64\u4f4d\u7528\u6765\u8bbe\u7f6e  IO \u901f\u5ea6\uff0c\u8bbe\u7f6e\u5982\u8868  8.1.4.2 \u6240\u793a\uff1a"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf8d071ddac507ccf46c2a",alt:"image-20230725165119430"})),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"DSE(bit5:3)"),"\uff1a\u5bf9\u5e94\u56fe  8.1.4.2 \u4e2d\u7684  DSE\uff0c\u5f53  IO \u7528\u4f5c\u8f93\u51fa\u7684\u65f6\u5019\u7528\u6765\u8bbe\u7f6e  IO \u7684\u9a71\u52a8\u80fd\u529b\uff0c\u603b\u5171\u6709  8 \u4e2a\u53ef\u9009\u9009\u9879\uff0c\u5982\u8868  8.1.4.3 \u6240\u793a\uff1a"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf8d481ddac507ccf4e066",alt:"image-20230725165224417"})),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"SRE(bit0)"),"\uff1a\u5bf9\u5e94\u56fe 8.1.4.2 \u4e2d\u7684 SRE\uff0c\u8bbe\u7f6e\u538b\u6446\u7387\uff0c\u5f53\u6b64\u4f4d\u4e3a 0 \u7684\u65f6\u5019\u662f\u4f4e\u538b\u6446\u7387\uff0c\u5f53\u4e3a 1 \u7684\u65f6\u5019\u662f\u9ad8\u538b\u6446\u7387\u3002\u8fd9\u91cc\u7684\u538b\u6446\u7387\u5c31\u662f IO \u7535\u5e73\u8df3\u53d8\u6240\u9700\u8981\u7684\u65f6\u95f4.\u5982\u679c\u4f60\u7684\u4ea7\u54c1\u8981\u8fc7 EMC \u7684\u8bdd\u90a3\u5c31\u53ef\u4ee5\u4f7f\u7528\u5c0f\u7684\u538b\u6446\u7387\uff0c\u56e0\u4e3a\u6ce2\u5f62\u7f13\u548c\uff0c\u5982\u679c\u4f60\u5f53\u524d\u6240\u4f7f\u7528\u7684 IO \u505a\u9ad8\u901f\u901a\u4fe1\u7684\u8bdd\u5c31\u53ef\u4ee5\u4f7f\u7528\u9ad8\u538b\u6446\u7387\u3002"),(0,p.kt)("p",null,"\u901a\u8fc7\u4e0a\u9762\u7684\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u770b\u51fa\u5bc4\u5b58\u5668 IOMUXC_SW_PAD_CTL_PAD_GPIO1_IO00 \u662f\u7528\u6765\u914d\u7f6e GPIO1_IO00 \u7684\uff0c\u5305\u62ec",(0,p.kt)("strong",{parentName:"p"},"\u901f\u5ea6\u8bbe\u7f6e"),"\u3001",(0,p.kt)("strong",{parentName:"p"},"\u9a71\u52a8\u80fd\u529b\u8bbe\u7f6e"),"\u3001",(0,p.kt)("strong",{parentName:"p"},"\u538b\u6446\u7387\u8bbe\u7f6e"),"\u7b49\u7b49\u3002"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf8e881ddac507ccf6e76f",alt:"image-20230725165744294"})),(0,p.kt)("p",null,"\u5f53 IO \u7528\u4f5c GPIO \u7684\u65f6\u5019\u9700\u8981\u8bbe\u7f6e\u7684\u5bc4\u5b58\u5668\uff0c\u4e00\u5171\u6709\u516b\u4e2a\uff1aDR\u3001GDIR\u3001PSR\u3001ICR1\u3001ICR2\u3001EDGE_SEL\u3001IMR \u548c ISR"),(0,p.kt)("p",null,"\u5148\u770bDR\uff0c\u6b64\u5bc4\u5b58\u5668\u662f 32 \u4f4d\u7684\uff0c\u4e00\u4e2a GPIO \u7ec4\u6700\u5927\u53ea\u6709 32 \u4e2a IO\uff0c\u56e0\u6b64 DR \u5bc4\u5b58\u5668\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u90fd\u5bf9\u5e94 \u4e00\u4e2a GPIO\u3002\u5f53 GPIO \u88ab\u914d\u7f6e\u4e3a\u8f93\u51fa\u529f\u80fd\u4ee5\u540e\uff0c\u5411\u6307\u5b9a\u7684\u4f4d\u5199\u5165\u6570\u636e\u90a3\u4e48\u76f8\u5e94\u7684 IO \u5c31\u4f1a\u8f93\u51fa\u76f8\u5e94\u7684\u9ad8\u4f4e\u7535\u5e73\uff0c\u6bd4\u5982\u8981\u8bbe\u7f6eGPIO1_IO00 \u8f93\u51fa\u9ad8\u7535\u5e73\uff0c\u90a3\u4e48\u5c31\u5e94\u8be5\u8bbe\u7f6e GPIO1.DR=1\u3002\u5f53GPIO\u88ab\u914d\u7f6e\u4e3a\u8f93\u5165\u6a21\u5f0f\u4ee5\u540e\uff0c\u6b64\u5bc4\u5b58\u5668\u5c31\u4fdd\u5b58\u7740\u5bf9\u5e94  IO \u7684\u7535\u5e73\u503c\uff0c\u6bcf\u4e2a\u4f4d\u5bf9\u5bf9\u5e94\u4e00\u4e2a GPIO\uff0c\u4f8b\u5982\uff0c \t\u5f53  GPIO1_IO00 \u8fd9\u4e2a\u5f15\u811a\u63a5\u5730\u7684\u8bdd\uff0c\u90a3\u4e48  GPIO1.DR \u7684  bit0 \u5c31\u662f 0\u3002"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"GIDR"),"\uff1aIO\u8f93\u5165\u8f93\u51fa")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"PSR"),"\uff1apad status GPIO\u72b6\u6001")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"ICR1/2"),"\uff1a\u4e2d\u65ad\u63a7\u5236\u5bc4\u5b58\u5668"),(0,p.kt)("p",{parentName:"li"},"ICR1 \u7528\u4e8e\u914d\u7f6e\u4f4e 16 \u4e2a GPIO\uff0c\nICR2 \u7528\u4e8e\u914d\u7f6e\u9ad8  16 \u4e2a GPIO"),(0,p.kt)("p",{parentName:"li"},(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf96141ddac507cc03ded4",alt:"image-20230725172955785"}))),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"IMR"),"\uff1a\u4e2d\u65ad\u5c4f\u853d\u5bc4\u5b58\u5668")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"ISR"),"\uff1a\u4e2d\u65ad\u72b6\u6001\u5bc4\u5b58\u5668"))),(0,p.kt)("h4",{id:""}),(0,p.kt)("h4",{id:"chapter-18-clock-controller-moduleccm"},"Chapter 18: Clock Controller Module(CCM)"),(0,p.kt)("p",null,"CCM\u91cc\u9762\u7684\u5916\u8bbe\u65f6\u949f\u4f7f\u80fd\u5bc4\u5b58\u5668 \u3002 CMM \u6709 CM_CCGR0~CCM_CCGR6 \u8fd9 7 \u4e2a\u5bc4\u5b58\u5668\uff0c\u8fd9 7 \u4e2a\u5bc4\u5b58\u5668\u63a7\u5236\u7740 I.MX6U \u7684\u6240\u6709\u5916\u8bbe\u65f6\u949f\u5f00\u5173"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf97af1ddac507cc0642fa",alt:"image-20230725173647267"})),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bf97ba1ddac507cc06564d",alt:"image-20230725173658533"})),(0,p.kt)("p",null,"\u6bcf\u4e2aCG\uff082bits\uff09\u5bf9\u5e94\u7740\u4e00\u4e2a\u4e00\u4e2a\u5916\u8bbe\uff0c\u6bd4\u5982UART2\u7b49\u7b49\uff0c\u5982\u679c\u60f3\u5f00\u76f4\u63a511\uff0c CCM_CCGR0=3<<31\uff08\u53ef\u80fd\u5199\u9519\u4e86\uff0c\u9700\u8981\u4e2a|?\uff09"),(0,p.kt)("h3",{id:"\u4e0a\u673a"},"\u4e0a\u673a"),(0,p.kt)("admonition",{title:"\u6ce8\u610f",type:"warning"},(0,p.kt)("p",{parentName:"admonition"},"\u6ce8\u610f\u533a\u5206",(0,p.kt)("inlineCode",{parentName:"p"},"\u5b58\u50a8\u5730\u5740"),"\u548c",(0,p.kt)("inlineCode",{parentName:"p"},"\u8fd0\u884c\u5730\u5740"),"\uff0c\u5b58\u50a8\u5730\u5740\u662f\u6211\u4eec\u653eimg\u7684\u5730\u65b9\uff0c\u8fd0\u884c\u5730\u5740\u662fentry addr\uff0c\u5982\u679c\u8981\u542f\u52a8\uff0c\u9700\u8981bios/\u542f\u52a8\u7a0b\u5e8f\u5c06img\u642c\u5230\u8d77\u59cb\u5730\u5740\u5728\u542f\u52a8")),(0,p.kt)("p",null,"\u4ee3\u7801\u53ef\u4ee5\u5b58\u50a8\u5230  SD \u5361\u3001EMMC \u6216\u8005 NAND \u4e2d\uff0c\u4f46\u662f\u542f\u52a8\u533a\u57df\u4e0d\u4e00\u6837"),(0,p.kt)("p",null,"\u5728 I.MX6U \u7684\u5185\u90e8 128KB RAM \u4e2d (0X900000~0X91FFFF)\uff0c\u4e5f\u53ef\u4ee5\u5728\u5916\u90e8\u7684 DDR \u4e2d\uff080X87800000\uff0c\u8d77\u59cb\u5730\u5740\u90fd\u4e3a 0X80000000\uff0c\u53ea\u4e0d\u8fc7 512MB \u7684\u7ec8\u6b62\u5730\u5740\u4e3a 0X9FFFFFFF\uff0c\u800c 256MB \u5bb9\u91cf\u7684\u7ec8\u6b62\u5730\u5740\u4e3a 0X8FFFFFFF\u3002\u4e4b\u6240\u4ee5\u9009\u62e9 0X87800000 \u8fd9\u4e2a\u5730\u5740\u662f\u56e0\u4e3a\u540e\u9762\u8981\u8bb2\u7684 Uboot \u5176\u94fe\u63a5\u5730\u5740\u5c31\u662f 0X87800000\uff0c\u8fd9\u6837\u6211\u4eec\u7edf\u4e00\u4f7f\u7528 0X87800000 \u8fd9\u4e2a\u94fe\u63a5\u5730\u5740\uff0c\u4e0d\u5bb9\u6613\u8bb0\u6df7\u3002"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"arm-linux-gnueabihf-ld -Ttext 0X87800000 led.o -o led.elf\n")),(0,p.kt)("p",null,"-Ttext\u6307\u5b9a\u94fe\u63a5\u5730\u5740"),(0,p.kt)("p",null,"\u8fd8\u9700\u8981\u5c06elf\u8f6c\u6210bin\uff0c\u9700\u8981",(0,p.kt)("inlineCode",{parentName:"p"},"arm-linux-gnueabihf-objcopy ")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"arm-linux-gnueabihf-objcopy -O binary -S -g led.elf led.bin\n")),(0,p.kt)("p",null,"-O\u5236\u5b9a\u8f93\u51fa\u683c\u5f0f binary\uff0c-S\u8868\u793a\u4e0d\u8981\u590d\u5236\u6e90\u6587\u4ef6\u7684\u91cd\u5b9a\u4f4d\u4fe1\u606f\u548c\u7b26\u53f7\u4fe1\u606f"),(0,p.kt)("p",null,"TODO:\u4ec0\u4e48\u662f\u91cd\u5b9a\u4f4d\u4fe1\u606f\uff1f"),(0,p.kt)("h4",{id:"arm-linux-gnueabihf-objdump-\u53cd\u6c47\u7f16"},"arm-linux-gnueabihf-objdump \u53cd\u6c47\u7f16"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"arm-linux-gnueabihf-objdump -D led.elf  >  led.dis\n")),(0,p.kt)("p",null,"\u5c06elf\u53cd\u6c47\u7f16"),(0,p.kt)("h3",{id:"\u542f\u52a8\u65b9\u5f0f"},"\u542f\u52a8\u65b9\u5f0f"),(0,p.kt)("p",null,"I.MX6U \u6709\u4e00\u4e2a BOOT_MODE1 \u5f15\u811a\u548cBOOT_MODE0 \u5f15\u811a"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bfb8cf1ddac507cc3a5b7b",alt:"image-20230725195807294"})),(0,p.kt)("p",null,"FUSE\u662f\u7194\u65ad\uff0c\u4e00\u822c\u4e0d\u7528\u5427"),(0,p.kt)("p",null,"01\u4e32\u884c\u4e0b\u8f7d\u662f\u4eceusb/\u4e32\u53e3\u4e0b\u8f7d"),(0,p.kt)("h4",{id:"\u5185\u90e8boot\u6a21\u5f0f"},"\u5185\u90e8Boot\u6a21\u5f0f"),(0,p.kt)("p",null,"\u9009\u597d\u5185\u90e8BOOT\u4e4b\u540e\u53ef\u4ee5\u7528GPIO\u63a7\u5236BOOT rom\u9009\u54ea\u4e2a\u6765\u542f\u52a8\u4e86\uff0c"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bfbaa71ddac507cc3d6f23",alt:"image-20230725200559671"})),(0,p.kt)("h4",{id:"\u955c\u50cf\u70e7\u5199"},"\u955c\u50cf\u70e7\u5199"),(0,p.kt)("p",null,"imxdownload\u5e72\u4e86\u4ec0\u4e48\uff1fidk"),(0,p.kt)("p",null,".imx\u7ec4\u6210\uff1a"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},"Image vector table\uff1a\u4e00\u7cfb\u5217\u5730\u5740\u5411\u91cf"),(0,p.kt)("li",{parentName:"ol"},"Boot data \uff1a\u542f\u52a8\u6570\u636e\uff0c\u5305\u62ec\u955c\u50cf\u8981\u62f7\u53bb\u54ea\uff0c\u5927\u5c0f"),(0,p.kt)("li",{parentName:"ol"},"Device configuration data\uff1a\u8bbe\u5907\u914d\u7f6e\u4fe1\u606f\uff0cDDR3\u914d\u7f6e\u7b49\u7b49"),(0,p.kt)("li",{parentName:"ol"},"\u7528\u6237\u53ef\u6267\u884c\u6587\u4ef6bin")),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"\u81f3\u4eca\u6211\u4eec\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u4e0d\u4ece0x80000000\u5f00\u59cb")),(0,p.kt)("p",null,"\u524d\u9762\u585e\u4e86\u4e00\u5768\u5c4e3KByte\uff0c load.imx \u5728 DDR \u4e2d\u7684\u8d77\u59cb\u5730\u5740\u5c31\u662f 0X87800000-\n3072=0X877FF400"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bfc73d1ddac507cc5174fe",alt:"image-20230725205940722"})),(0,p.kt)("p",null,"\u91cc\u9762\u6709\u4e2aself\u55f7\uff0c\u5e94\u8be5\u5c31\u662fivt\u4e86"),(0,p.kt)("p",null,"\u7b2c\u4e00\u4e2aheader\uff1a"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bfcc131ddac507cc5a9d7e",alt:"image-20230725212018796"})),(0,p.kt)("p",null,"0X41"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bfcc5d1ddac507cc5b1e54",alt:"image-20230725212133199"})),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bfcc921ddac507cc5b75dc",alt:"image-20230725212226155"})),(0,p.kt)("h4",{id:"dcd\u6570\u636e"},"DCD\u6570\u636e"),(0,p.kt)("p",null,"\u590d\u4f4d\u5916\u8bbe\u5bc4\u5b58\u5668\u7684\u9ed8\u8ba4\u503c\u3002DCD \u533a\u57df\u4e0d\u80fd\u8d85\u8fc7 1768Byte\uff0cDCD \u533a\u57df\u7ed3\u6784\u5982\u56fe"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bfcd7b1ddac507cc5cf2b1",alt:"image-20230725212619236"})),(0,p.kt)("p",null,"\u539f\u6587\u653e\u9001"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64bfcddc1ddac507cc5d8ded",alt:"image-20230725212756379"})),(0,p.kt)("h4",{id:"\u94fe\u63a5\u811a\u672c"},"\u94fe\u63a5\u811a\u672c"),(0,p.kt)("p",null,"\u5b9a\u4e49\u4e86SP\u6808\u6307\u9488\uff0c\u6307\u5411main\u4e4b\u540e\uff0c\u611f\u89c9\u8fd8\u7f3a\u70b9\u5565\uff1f"),(0,p.kt)("p",null,"C\u8bed\u8a00\u7684\u5185\u5b58\u6a21\u578b\u662f\u4e0d\u662f\u5c11\u4e86\u4e00\u4e9b\u4e1c\u897f\uff1f"),(0,p.kt)("p",null,"\u6bb5\uff0csections\uff0ctext,data,bss,rodata"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-lds"},"SECTIONS{           //\u6bb5\u540d\n    . = 0X87800000; //\u5b9a\u4f4d\u8ba1\u6570\u5668\u8d4b\u503c\n    .text :         //\u6bb5\u540d\n    {\n        start.o \n        main.o \n        *(.text)    //*\u4e3a\u901a\u914d\u7b26\n    }\n    .rodata ALIGN(4) : {*(.rodata*)}    //\u5b57\u8282\u5bf9\u9f50 \n    .data ALIGN(4)   : { *(.data) }   //\u5b57\u8282\u5bf9\u9f50\n    __bss_start = .;        //bss\u7b26\u53f7\u8d4b\u503c\uff0cbss\u662f\u5b9a\u4e49\u4e86\u4f46\u6ca1\u521d\u59cb\u5316\u7684\u53d8\u91cf\n    .bss ALIGN(4)  : { *(.bss)  *(COMMON) }    \n    __bss_end = .;\n}\n")),(0,p.kt)("h3",{id:"\u79fb\u690d\u5b98\u65b9sdk"},"\u79fb\u690d\u5b98\u65b9SDK"),(0,p.kt)("h4",{id:"\u8bbe\u7f6eio\u590d\u7528"},"\u8bbe\u7f6eIO\u590d\u7528"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-c"},"static inline void IOMUXC_SetPinMux(uint32_t muxRegister,\n                                    uint32_t muxMode,\n                                    uint32_t inputRegister,\n                                    uint32_t inputDaisy,\n                                    uint32_t configRegister,\n                                    uint32_t inputOnfield)\n{\n    *((volatile uint32_t *)muxRegister) =\n        IOMUXC_SW_MUX_CTL_PAD_MUX_MODE(muxMode) | IOMUXC_SW_MUX_CTL_PAD_SION(inputOnfield);\n\n    if (inputRegister)\n    {\n        *((volatile uint32_t *)inputRegister) = IOMUXC_SELECT_INPUT_DAISY(inputDaisy);\n    }\n}\n")),(0,p.kt)("p",null,"\u56e0\u4e3a\u5165\u53c2\u6bd4\u8f83\u591a\uff0c\u800c\u4e14\u5b8f\u5b9a\u4e49\u5199\u597d\u4e86\uff0c\u6240\u4ee5\u518d\u63d0\u4e00\u4e0b"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},"muxRegister\uff1aIO\u590d\u7528\u5bc4\u5b58\u5668\u5730\u5740"),(0,p.kt)("li",{parentName:"ol"},"muxMode\uff1aIO\u590d\u7528\u503c\uff0c\u5c31\u662fALT0-8\uff0c\u8bbe\u7f6e\u4e0d\u540c\u7684\u590d\u7528\u529f\u80fd"),(0,p.kt)("li",{parentName:"ol"},"inputRegister\uff1a\u5916\u8bbe\u8f93\u5165IO\u9009\u62e9\u5bc4\u5b58\u5668\u5730\u5740\uff0c\u6709\u4e9b IO \u5728\u8bbe\u7f6e\u4e3a\u5176\u4ed6\u7684\u590d\u7528\u529f\u80fd\u4ee5\u540e\u8fd8\u9700\u8981\u7f6e IO \u8f93 \u5165 \u5bc4 \u5b58 \u5668 \uff0c \u6bd4\u5982 GPIO1_IO03 \u8981\u590d\u7528\u4e3a UART1_RX\u7684\u8bdd\u8fd8\u9700\u8981\u8bbe\u7f6e\u5bc4\u5b58\u5668UART1_RX_DATA_SELECT_INPUT\uff0c\u6b64\u5bc4\u5b58\u5668\u5730\u5740\u4e3a 0X020E0624"),(0,p.kt)("li",{parentName:"ol"},"inputDaisy\uff1ainputRegister\u7684\u503c"),(0,p.kt)("li",{parentName:"ol"},"configRegister\uff1a\u672a\u4f7f\u7528\uff0c\u51fd\u6570 IOMUXC_SetPinConfig \u4f1a\u4f7f\u7528\u8fd9\u4e2a\u5bc4\u5b58\u5668"),(0,p.kt)("li",{parentName:"ol"},"inputOnfield\uff1a1/0")),(0,p.kt)("p",null,"\u8fd9\u6b21\u7684Makefile\u6709\u70b9\u957f\u54e6\uff0c\u6211\u7b2c\u4e00\u6b21\u4ee5\u4e3a\u53ea\u8981\u7528\u81ea\u52a8\u53d8\u91cf\u52a0\u4e0astart.S\u5c31\u80fd\u89e3\u51b3\u6765\u7740"),(0,p.kt)("p",null,"\u4f46\u662f\u4ed6\u4eec\u7a0d\u5fae\u5347\u7ea7\u4e86\u4e00\u4e0b"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-makefile"},"CROSS_COMPILE ?= arm-linux-gnueabihf-\nNAME          ?= ledc\n\nCC      := $(CROSS_COMPILE)gcc\nLD      := $(CROSS_COMPILE)ld\nOBJCOPY := $(CROSS_COMPILE)objcopy\nOBJDUMP := $(CROSS_COMPILE)objdump\n\nOBJS    := start.o main.o\n\n$(NAME).bin:$(OBJS)\n    $(LD) -Timx6ul.lds -o $(NAME).elf $^\n    $(OBJCOPY) -O binary -S $(NAME).elf $@\n    $(OBJDUMP) -D -m arm $(NAME).elf > $(NAME).dis\n\n%.o:%.s\n    $(CC) -Wall -nostdlib -c -O2 -o $@ $<\n    \n%.o:%.S\n    $(CC) -Wall -nostdlib -c -O2 -o $@ $<\n    \n%.o:%.c\n    $(CC) -Wall -nostdlib -c -O2 -o $@ $<\n    \nclean:\n    rm -rf *.o $(NAME).bin $(NAME).elf $(NAME).dis\n    \n")),(0,p.kt)("h3",{id:"\u5347\u7ea7\u5de5\u7a0b\u6a21\u677f"},"\u5347\u7ea7\u5de5\u7a0b\u6a21\u677f"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"INCLUDE := -I imx6ul -I bsp/clk -I bsp/led -I bsp/delay\n")),(0,p.kt)("p",null,"-I \u662f\u56e0\u4e3aMakefile\u8bed\u6cd5\u8981\u6c42\u5934\u6587\u4ef6\u76ee\u5f55\u9700\u8981\u52a0\u5165"),(0,p.kt)("p",null,"\u540e\u9762\u7684\u505a\u6cd5\u662f\u4f7f\u7528patsubst/"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-makefile"},"# patsubst\u51fd\u6570\u7528\u4e8e\u5c06INCDIRS\u4e2d\u7684\u6bcf\u4e2a\u76ee\u5f55\u540d\u524d\u6dfb\u52a0-I\u53c2\u6570\uff0c\n# \u7528\u6cd5: $(patsubst pattern,replacement,text)\n# pattern\u662f%\uff08\u8868\u793a\u5339\u914d\u4efb\u610f\u5b57\u7b26\uff09\n# replacement\u662f-I %\uff08\u8868\u793a\u5728\u6bcf\u4e2a\u5339\u914d\u5230\u7684\u76ee\u5f55\u540d\u524d\u6dfb\u52a0-I\u53c2\u6570\uff09\n# text\u662f$(INCDIRS)\uff08\u8868\u793a\u8981\u5bf9INCDIRS\u4e2d\u7684\u6bcf\u4e2a\u76ee\u5f55\u540d\u8fdb\u884c\u66ff\u6362\uff09\nINCLUDE         := $(patsubst %, -I %, $(INCDIRS))\n")),(0,p.kt)("p",null,"\u7528wildcard\u5c06\u6240\u6709\u5305\u542b\u7684\u76ee\u5f55\u6574\u5408\u6210\u5217\u8868"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-makefile"},"# \u5bf9\u4e8e\u6bcf\u4e2a\u76ee\u5f55\uff0c\u4f7f\u7528wildcard\u51fd\u6570\u67e5\u627e\u8be5\u76ee\u5f55\u4e0b\u6240\u6709\u7684.S\u6587\u4ef6\uff0c\u5e76\u5c06\u7ed3\u679c\u4fdd\u5b58\u5230\u4e00\u4e2a\u5217\u8868\u4e2d\nSFILES          := $(foreach dir, $(SRCDIRS), $(wildcard $(dir)/*.S)) \n")),(0,p.kt)("p",null,"\u53bb\u9664\u8def\u5f84"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-makefile"},"# \u53bb\u9664SFILES\u7684\u8def\u5f84\uff0c\u7559\u4e0b\u6587\u4ef6\u540d\nSFILENDIR       := $(notdir  $(SFILES))\n")),(0,p.kt)("h3",{id:"\u4e3b\u9891\u4e0e\u65f6\u949f"},"\u4e3b\u9891\u4e0e\u65f6\u949f"),(0,p.kt)("p",null,"\u9ed8\u8ba4\u5de5\u4f5c\u9891\u7387\u4e3a528MHz\uff0c\u4f46\u662f\u6211\u4eec\u4e4b\u524d\u5f00\u7684\u90fd\u662f396MHz"),(0,p.kt)("p",null,"\u65f6\u949f\u6e90\u6709\u4e24\u90e8\u5206\uff1a32.768KHz\uff08\u4f9bRTC\u65f6\u949f\uff09 \u548c 24MHz\uff08\u5185\u6838\u4e0e\u5916\u8bbe\u65f6\u949f\uff09 \u7684\u6676\u632f"),(0,p.kt)("h4",{id:"7\u8defpll\u65f6\u949f\u6e90"},"7\u8defPLL\u65f6\u949f\u6e90"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"ARM PLL"),"\uff1a\u7ed9ARM\u5185\u6838\u7528\u7684\uff0c\u53ef\u7f16\u7a0b\u8d85\u52301.3GHz",(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c13b441ddac507ccaef685",alt:"image-20230726232649832"}))),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"528_PLL"),"\uff1a\u4e5f\u53ebSystem_PLL\uff0c\u4e3a\u56fa\u5b9a\u768422\u500d\u9891\uff0c\u4e0d\u53ef\u7f16\u7a0b\uff0824MHz*22=528MHz\uff09\u6240\u4ee5\u8fd9\u5bb6\u4f19\u53eb528_PLL\uff0c\u540c\u65f6\u5206\u51fa\u67654\u8defPFD\u3002"),(0,p.kt)("blockquote",{parentName:"li"},(0,p.kt)("p",{parentName:"blockquote"},"\u6b64 PLL \u5206\u51fa\u4e86 4 \u8def PFD\uff0c\u5206\u522b\u4e3a\uff1aPLL2_PFD0~PLL2_PFD3\uff0c\u8fd9 4 \u8def PFD \u548c 528_PLL \u5171\u540c\u4f5c\u4e3a\u5176\u5b83\u5f88\u591a\u5916\u8bbe\u7684\u6839\u65f6\u949f\u6e90\u3002\u901a\u5e38 528_PLL \u548c\u8fd9 4 \u8def PFD \u662f I.MX6U \u5185\u90e8\u7cfb\u7edf\u603b\u7ebf\u7684\u65f6\u949f\u6e90\uff0c\u6bd4\u5982\u5185\u5904\u7406\u903b\u8f91\u5355\u5143\u3001DDR \u63a5\u53e3\u3001NAND/NOR \u63a5\u53e3\u7b49\u7b49"),(0,p.kt)("p",{parentName:"blockquote"},(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c13bf51ddac507ccb020d6",alt:"image-20230726232956355"})))),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"USB1_PLL(PLL3)"),"\uff1aUSBPHY\u4f7f\u7528\uff0c\u540c\u65f6\u4e5f\u67094\u8defPFD\uff0c\u56fa\u5b9a20\u500d\u9891=480MHz")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"USB2_PLL(PLL7)"),"\uff1a\u540c\u7406")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"ENET_PLL(PLL6)"),"\uff1aPLL\u4e3a20+5/6\u500d\u9891\uff0c500MHz\uff0c\u6b64PLL\u7528\u4e8e\u751f\u6210\u7f51\u7edc\u7684\u65f6\u949f")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"VIDEO_PLL(PLL5)"),"\uff1a\u7528\u4e8e\u663e\u793a\u7684\u5916\u8bbe\u5982LCD\uff0cPLL \u7684\u8f93\u51fa\u8303\u56f4\u5728 650MHz~1300MHz\u3002\u6b64\u8def PLL \u5728\u6700\u7ec8\u8f93\u51fa\u7684\u65f6\u5019\u8fd8\u53ef\u4ee5\u8fdb\u884c\u5206\u9891\uff0c\u53ef\u9009 1/2/4/8/16 \u5206\u9891")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"AUDIO_PLL(PLL4)"),",\u6b64\u8def PLL \u7528\u4e8e\u97f3\u9891\u76f8\u5173\u7684\u5916\u8bbe\uff0c\u6b64\u8def PLL \u7684\u500d\u9891\u53ef\u4ee5\u8c03\u6574\uff0cPLL \u7684\u8f93\u51fa\u8303\u56f4\u540c\u6837\u4e5f\u662f 650MHz~1300MHz\uff0c\u6b64\u8def PLL \u5728\u6700\u7ec8\u8f93\u51fa\u7684\u65f6\u5019\u4e5f\u53ef\u4ee5\u8fdb\u884c\u5206\u9891\uff0c\u53ef\u9009 1/2/4 \u5206\u9891\u3002"))),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c159061ddac507cce80493",alt:"image-20230727013357102"})),(0,p.kt)("h4",{id:"\u5185\u6838\u65f6\u949f\u8bbe\u7f6e"},"\u5185\u6838\u65f6\u949f\u8bbe\u7f6e"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c1d7dc1ddac507cc6edca2",alt:"image-20230727103459932"}),"\u5185\u6838\u65f6\u949f\u6765\u6e90\u4e8ePLL1\uff0c\u800c\u901a\u8fc7CACRR\u5bc4\u5b58\u5668\u7684ARM_PODF\u4f4d\u53ef\u5bf9\u5176\u8fdb\u884c1248\u5206\u9891"),(0,p.kt)("p",null,"498\u7684\u4e3b\u9891=996/2"),(0,p.kt)("p",null,"528\u4e3b\u9891=1056/2"),(0,p.kt)("p",null,"696\u4e3b\u9891=696/1"),(0,p.kt)("admonition",{title:"\u6ce8\u610f",type:"warning"},(0,p.kt)("p",{parentName:"admonition"},"\u5979\u6700\u53f3\u8fb9\u8fd8\u6709\u4e2a\u5206\u9891\u5bf9\u5427\uff1f\u5047\u7684\uff0c\u6ca1\u6709\u4f5c\u7528\u7684\u54e6")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"\u90a3\u600e\u4e48\u8bbe\u7f6ePLL1\u4e3b\u9891\uff1f"),"\u518d\u6765\u770b\u4e00\u4e0b\u5bc4\u5b58\u5668 CCM_ANALOG_PLL_ARMn"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c1dbec1ddac507cc75ad17",alt:"image-20230727105227098"})),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("inlineCode",{parentName:"li"},"ENABLE"),"\uff1a\u4e3a\u5f00\u542f\u65f6\u949f\u8f93\u51fa\uff0c0PLL1\u5c31shutdown\u4e86"),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("inlineCode",{parentName:"li"},"DIV_SELECT"),"\uff1apll\u8f93\u51fa\u9891\u7387\uff0c\u53ef\u4ee5\u8bbe\u7f6e54-108\uff0c\u8f93\u51fa=FIN*value/2\uff0cFIN=24MHz\uff0c\u5982\u679c\u8981\u8ba9pll1\u8f93\u51fa\u4e3a1056\u7684\u8bdd\uff0c\u8fd9\u4e2a\u5bc4\u5b58\u5668\u8981\u8bbe\u4e3a88")),(0,p.kt)("p",null,"\u8bbe\u7f6e\u8fd9\u5bb6\u4f19\u8fd8\u597d\uff0c\u4fee\u6539PLL1\u7684\u65f6\u5019\u8981\u5207\u53bb\u5176\u4ed6\u65f6\u949f\u6e90"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c1dd051ddac507cc7758fe",alt:"image-20230727105708167"})),(0,p.kt)("p",null,"\u53ef\u4ee5\u770b\u52302/3\u90fd\u6709\u4e2aCCSR\uff1a\uff0c\u8fd9\u4e24\u4e2a\u662fCCSR\u4e2d\u7684\u4e24\u4e2a\u4f4d\uff0c\u7528\u4e8e\u63a7\u5236\u65f6\u949f\u6e90"),(0,p.kt)("p",null,"\u5f53\u6211\u4eec\u8c03\u6574PLL1\u4e4b\u524d\uff0c\u65f6\u949f\u7684\u6765\u6e90\u4e00\u76f4\u662fpll1_main_clk\uff0c\u9700\u8981\u5207\u53bbstep_clk"),(0,p.kt)("p",null,"\u4f46\u662fstep_clk\u4e5f\u662f\u53ef\u4ee5\u9009\u7684\uff0c\u4e00\u822c\u90fd\u9009osc_clk\u4e5f\u5c31\u662f\u6676\u632f\u768424MHz\uff08",(0,p.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff0c\u518d\u8bbe\u7f6ePLL1\u4e4b\u524d\u5e94\u8be5\u5148\u5207step_clk\u5230osc")),(0,p.kt)("p",null,"\u6539\u5b8cPLL1\u4e4b\u540e\u9700\u8981\u5207\u56de\u53bb\uff0c\u5207\u56de\u53bb\u4e4b\u540e\u662f1056\uff0c\u518d\u8c03\u6574\u521a\u521a\u4e0a\u9762\u7684ARM_PODF\u4f4d\u8fdb\u884c2\u5206\u9891"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c1dde01ddac507cc78d4e8",alt:"image-20230727110047252"})),(0,p.kt)("p",null,"\u53ea\u7528\u5173\u6ce88\u548c2\uff0c0\u4e3aPLL3\u7684"),(0,p.kt)("h4",{id:"pfd\u9891\u7387"},"PFD\u9891\u7387"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c1dfee1ddac507cc7c1341",alt:"image-20230727110933358"})),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c1e00d1ddac507cc7ca13f",alt:"image-20230727111004055"})),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c1dfd51ddac507cc7bea24",alt:"image-20230727110907134"})),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"PFD0_FRAC"),": PLL2_PFD0 \u7684\u5206\u9891\u6570\uff0cPLL\u5230PFD\u9700\u8981\u5206\u9891\uff0c\u6bd4\u5982PLL2_PFD0 \u7684\u8ba1\u7b97\u516c\u5f0f\u4e3a",(0,p.kt)("inlineCode",{parentName:"p"}," 528*18/PFD0_FRAC"),"\uff0c\u6b64\u4e3a\u53ef\u8bbe\u7f6e\u7684\u8303\u56f4\u4e3a12~35 \u3002 \u5982 \u679c PLL2_PFD0 \u7684 \u9891 \u7387 \u8981 \u8bbe \u7f6e \u4e3a 352MHz \u7684\u8bdd PFD0_FRAC=528*18/352=27\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"PFD0_STABLE"),"\uff1a\u53ea\u8bfb\u4f4d\uff0c\u770b\u770bPFD\u7a33\u4e0d\u7a33\u5b9a"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"PFD0_CLKGATE"),"\uff1a\u4f7f\u80fd\u4f4d\uff0c0\u65f6\u8f93\u51fa"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c1f8c71ddac507cca2267e",alt:"image-20230727125527911"})),(0,p.kt)("h4",{id:"ahbipg-\u548c--perclk-\u6839\u65f6\u949f\u8bbe\u7f6e"},"AHB\u3001IPG \u548c  PERCLK \u6839\u65f6\u949f\u8bbe\u7f6e"),(0,p.kt)("p",null,"\u5916\u8bbe\u6839\u65f6\u949f\u8bbe\u7f6e\u8303\u56f4"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c214b91ddac507ccddf221",alt:"image-20230727145448771"})),(0,p.kt)("p",null,"\u521d\u59cb\u5316AHB_CLK_ROOT\u662f\u5fc5\u987b\u7684\uff0cPERCLK_CLK_ROOT\u548cIPG_CLK_ROOT\u9700\u8981\u7528\u5230"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c21c501ddac507ccef7b26",alt:"image-20230727152710117"})),(0,p.kt)("h3",{id:"\u4e2d\u65ad\u7cfb\u7edf"},"\u4e2d\u65ad\u7cfb\u7edf"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c361801ddac507cc039414",alt:"image-20230728143433802"})),(0,p.kt)("p",null,"A7\u7edf\u4e00\u5c06\u5916\u8bbe\u7684\u4e2d\u65ad\u7eb3\u5165\u5230\u4e86IRQ\u4e2d\u65ad\u91cc\u4e86"),(0,p.kt)("p",null,"\u6709\u4e2aGIC\u63a7\u5236\u5668\uff08Generic Interrupt Controller)\uff0c\u6211\u4eec\u7528\u7684\u662f\u8001\u7248\u672cV2\uff0c3-4\u7ed9v8\u7b49\u7b49\u7528\u7684\uff0cV2\u6700\u591a\u652f\u6301\u4e24\u4e2a\u6838"),(0,p.kt)("p",null,"ARM \u5185\u6838\u53ea\u63d0\u4f9b\u4e86\u56db\u4e2a\u4fe1\u53f7\u7ed9 GIC \u6765\u6c47\u62a5\u4e2d\u65ad\u60c5\u51b5\uff1aVFIQ\u3001VIRQ\u3001FIQ \u548c IRQ"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c37e8e1ddac507cc3ef1d2",alt:"image-20230728163831246"})),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c37ea31ddac507cc3f16f5",alt:"image-20230728163853282"})),(0,p.kt)("p",null,"\u8fd9\u662fV2\u7684\u6846\u56fe\uff0c\u5de6\u8fb9\u662f\u4e2d\u65ad\u6e90\uff0c\u53ef\u4ee5\u770b\u5230\u6bcf\u4e2a\u6838\u5fc3\u90fd\u6709"),(0,p.kt)("h4",{id:"\u4e2d\u65ad\u5206\u7c7b"},"\u4e2d\u65ad\u5206\u7c7b"),(0,p.kt)("p",null,"GIC\u628a\u4e2d\u65ad\u6e90\u5206\u4e3a\u4e09\u7c7b"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},"SPI\uff08share peripheral Interrupt\uff0c\u6240\u6709\u6838\u5171\u4eab\u7684\u4e2d\u65ad\uff0c"),(0,p.kt)("li",{parentName:"ol"},"PPI\uff08private \u3002\u3002\u3002\uff09\uff0c\u79c1\u6709\u4e2d\u65ad\uff0c\u8ba9\u90a3\u4e2a\u6838\u5fc3\u81ea\u5df1\u641e\u6382"),(0,p.kt)("li",{parentName:"ol"},"SGI\uff08Software-generated Interrupt\uff0c\u8f6f\u4ef6\u4e2d\u65ad\uff0c\u901a\u8fc7\u5411\u5bc4\u5b58\u5668GICD_SGIR \u5199\u5165\u6570\u636e\u6765\u89e6\u53d1\uff0c\u7cfb\u7edf\u4f1a\u4f7f\u7528  SGI \u4e2d\u65ad\u6765\u5b8c\u6210\u591a\u6838\u4e4b\u95f4\u7684\u901a\u4fe1")),(0,p.kt)("h4",{id:"\u4e2d\u65adid"},"\u4e2d\u65adID"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"ID0-15"),"\uff1a",(0,p.kt)("strong",{parentName:"p"},"SGI")),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"ID16-31"),"\uff1a",(0,p.kt)("strong",{parentName:"p"},"PPI")),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"ID32-1019"),"\uff1a",(0,p.kt)("strong",{parentName:"p"},"SPI")),(0,p.kt)("p",null,"6ULL \u652f\u6301160\u4e2a\u4e2d\u65ad\uff0c\u88ab\u5382\u5546\u5b9a\u4e49\u4e86"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c380131ddac507cc41bd40",alt:"image-20230728164503587"})),(0,p.kt)("h4",{id:"cp15\u534f\u5904\u7406\u5668"},"CP15\u534f\u5904\u7406\u5668"),(0,p.kt)("p",null,"CP15 \u534f\u5904\u7406\u5668\u4e00\u822c\u7528\u4e8e",(0,p.kt)("strong",{parentName:"p"},"\u5b58\u50a8\u7cfb\u7edf\u7ba1\u7406"),"\uff0c\u4f46\u662f\u5728",(0,p.kt)("strong",{parentName:"p"},"\u4e2d\u65ad"),"\u4e2d\u4e5f\u4f1a\u4f7f\u7528\u5230\uff0cCP15 \u534f\u5904\u7406\u5668\u4e00\u5171\u6709 ",(0,p.kt)("strong",{parentName:"p"},"16 \u4e2a  32 \u4f4d\u5bc4\u5b58\u5668\u3002"),"CP15 \u534f\u5904\u7406\u5668\u7684\u8bbf\u95ee\u901a\u8fc7\u5982\u4e0b\u53e6\u4e2a\u6307\u4ee4\u5b8c\u6210\uff1a"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"MRC"),":  \u5c06  CP15 \u534f\u5904\u7406\u5668\u4e2d\u7684\u5bc4\u5b58\u5668\u6570\u636e\u8bfb\u5230  ARM \u5bc4\u5b58\u5668\u4e2d\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"MCR"),":  \u5c06 ARM \u5bc4\u5b58\u5668\u7684\u6570\u636e\u5199\u5165\u5230  CP15 \u534f\u5904\u7406\u5668\u5bc4\u5b58\u5668\u4e2d\u3002"),(0,p.kt)("p",null,"MRC \u5c31\u662f\u8bfb  CP15 \u5bc4\u5b58\u5668\uff0cMCR \u5c31\u662f\u5199  CP15 \u5bc4\u5b58\u5668\uff0cMCR \u6307\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"MCR{cond} p15, <opc1>, <Rt>, <CRn>, <CRm>, <opc2>\n")),(0,p.kt)("p",null,"cond:\u6307\u4ee4\u6267\u884c\u7684\u6761\u4ef6\u7801\uff0c\u5982\u679c\u5ffd\u7565\u7684\u8bdd\u5c31\u8868\u793a\u65e0\u6761\u4ef6\u6267\u884c\u3002 "),(0,p.kt)("p",null,"opc1\uff1a\u534f\u5904\u7406\u5668\u8981\u6267\u884c\u7684\u64cd\u4f5c\u7801\u3002"),(0,p.kt)("p",null,"Rt\uff1aARM \u6e90\u5bc4\u5b58\u5668\uff0c\u8981\u5199\u5165\u5230  CP15 \u5bc4\u5b58\u5668\u7684\u6570\u636e\u5c31\u4fdd\u5b58\u5728\u6b64\u5bc4\u5b58\u5668\u4e2d\u3002 "),(0,p.kt)("p",null,"CRn\uff1aCP15 \u534f\u5904\u7406\u5668\u7684\u76ee\u6807\u5bc4\u5b58\u5668\u3002"),(0,p.kt)("p",null,"CRm\uff1a\u534f\u5904\u7406\u5668\u4e2d\u9644\u52a0\u7684\u76ee\u6807\u5bc4\u5b58\u5668\u6216\u8005\u6e90\u64cd\u4f5c\u6570\u5bc4\u5b58\u5668\uff0c\u5982\u679c\u4e0d\u9700\u8981\u9644\u52a0\u4fe1\u606f\u5c31\u5c06CRm \u8bbe\u7f6e\u4e3a  C0\uff0c\u5426\u5219\u7ed3\u679c\u4e0d\u53ef\u9884\u6d4b\u3002"),(0,p.kt)("p",null,"opc2\uff1a\u53ef\u9009\u7684\u534f\u5904\u7406\u5668\u7279\u5b9a\u64cd\u4f5c\u7801\uff0c\u5f53\u4e0d\u9700\u8981\u7684\u65f6\u5019\u8981\u8bbe\u7f6e\u4e3a  0\u3002"),(0,p.kt)("p",null,"MRC \u7684\u6307\u4ee4\u683c\u5f0f\u548c MCR \u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u5728  MRC \u6307\u4ee4\u4e2d  Rt \u5c31\u662f\u76ee\u6807\u5bc4\u5b58\u5668\uff0c\u4e5f\u5c31\u662f\u4ece CP15 \u6307\u5b9a\u5bc4\u5b58\u5668\u8bfb\u51fa\u6765\u7684\u6570\u636e\u4f1a\u4fdd\u5b58\u5728  Rt \u4e2d\u3002\u800c  CRn \u5c31\u662f\u6e90\u5bc4\u5b58\u5668\uff0c\u4e5f\u5c31\u662f\u8981\u8bfb\u53d6\u7684\u5199\u5904\u7406\u5668\u5bc4\u5b58\u5668\u3002\u5047\u5982\u6211\u4eec\u8981\u5c06  CP15 \u4e2d C0 \u5bc4\u5b58\u5668\u7684\u503c\u8bfb\u53d6\u5230  R0 \u5bc4\u5b58\u5668\u4e2d\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"MRC p15, 0, r0, c0, c0, 0\n")),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c38a221ddac507cc56da47",alt:"image-20230728172800640"})),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c38b551ddac507cc58e404",alt:"image-20230728173308696"})),(0,p.kt)("p",null,"\u5728\u56fe 17.1.4.3 \u4e2d\u5f53 MRC/MCR \u6307\u4ee4\u4e2d\u7684 CRn=c1\uff0copc1=0\uff0cCRm=c0\uff0copc2=0 \u7684\u65f6\u5019\u5c31\u8868\u793a\u6b64\u65f6\u7684 c1 \u5c31\u662f SCTLR \u5bc4\u5b58\u5668\uff0c\u4e5f\u5c31\u662f\u7cfb\u7edf\u63a7\u5236\u5bc4\u5b58\u5668\uff0c\u8fd9\u4e2a\u662f c1 \u7684\u57fa\u672c\u4f5c\u7528\u3002SCTLR \u5bc4\u5b58\u5668\u4e3b\u8981\u662f\u5b8c\u6210\u63a7\u5236\u529f\u80fd\u7684\uff0c\u6bd4\u5982\u4f7f\u80fd\u6216\u8005\u7981\u6b62 MMU\u3001I/D Cache \u7b49"),(0,p.kt)("admonition",{type:"tip"},(0,p.kt)("p",{parentName:"admonition"},"\u53c2\u8003\u6587\u6863\u300aCortex-A7 Technical ReferenceManua.pdf\u300bChapter4 System Control\uff0c\u53ef\u4ee5\u77e5\u9053c0,c1,c12,c15\u7b49\u7b49\u7684\u6620\u5c04\u4e0e\u529f\u80fd\u8868")),(0,p.kt)("h4",{id:"\u4e2d\u65ad\u4f7f\u80fd"},"\u4e2d\u65ad\u4f7f\u80fd"),(0,p.kt)("p",null,"\u603b\u7684"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c391a71ddac507cc63dd2d",alt:"image-20230728180007383"})),(0,p.kt)("p",null,"\u5355\u4e2a\u7684\u9700\u8981\u5728GIC\u7684",(0,p.kt)("inlineCode",{parentName:"p"},"GICD_ISENABLERn")," \u548c ",(0,p.kt)("inlineCode",{parentName:"p"},"GICD_ ICENABLERn"),"\u5bc4\u5b58\u5668\u6765\u5b8c\u6210\u5916\u90e8\u4e2d\u65ad\u7684\u4f7f\u80fd\u4e0e\u7981\u6b62"),(0,p.kt)("p",null,"\u5176 \u4e2d GICD",(0,p.kt)("em",{parentName:"p"},(0,p.kt)("strong",{parentName:"em"},"IS"),"ENABLER0 \u7684 ",(0,p.kt)("strong",{parentName:"em"},"bit","[15:0]")," \u5bf9\u5e94 ID15~0 \u7684 SGI \u4e2d\u65ad\uff0cGICD"),(0,p.kt)("strong",{parentName:"p"},"IS"),"ENABLER0 \u7684 ",(0,p.kt)("strong",{parentName:"p"},"bit","[31:16]"),"\u5bf9\u5e94 ID31~16 \u7684 PPI \u4e2d\u65ad\u3002"),(0,p.kt)("p",null,"\u5269\u4e0b\u7684 GICD_ISENABLER1~GICD_ISENABLER15 \u5c31\u662f\u63a7\u5236 SPI \u4e2d\u65ad\u7684\u3002"),(0,p.kt)("h4",{id:"\u4e2d\u65ad\u4f18\u5148\u7ea7"},"\u4e2d\u65ad\u4f18\u5148\u7ea7"),(0,p.kt)("p",null,"GIC \u63a7\u5236\u5668\u6700\u591a\u53ef\u4ee5\u652f\u6301 256 \u4e2a\u4f18\u5148\u7ea7\uff0c",(0,p.kt)("strong",{parentName:"p"},"\u6570\u5b57\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8")," "),(0,p.kt)("p",null,"A7\u670932\u4e2a\u4f18\u5148\u7ea7\uff0c\u5728\u4f7f\u7528\u4e2d\u65ad\u7684\u65f6\u5019\u9700\u8981",(0,p.kt)("strong",{parentName:"p"},"\u521d\u59cb\u5316")," GICC_PMR \u5bc4\u5b58\u5668\uff0c\u6b64\u5bc4\u5b58\u5668\u7528\u6765\u51b3\u5b9a\u4f7f\u7528",(0,p.kt)("strong",{parentName:"p"},"\u51e0\u7ea7"),"\u4f18\u5148\u7ea7"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c392b51ddac507cc65bb76",alt:"image-20230728180437119"})),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c392ff1ddac507cc66545e",alt:"image-20230728180551100"})),(0,p.kt)("p",null,"I.MX6U \u662f Cortex-A7 \u5185\u6838\uff0c\u6240\u4ee5\u652f\u6301 32 \u4e2a\u4f18\u5148\u7ea7\uff0c\u56e0\u6b64 GICC_PMR \u8981\u8bbe\u7f6e\u4e3a ",(0,p.kt)("strong",{parentName:"p"},"0b11111000")),(0,p.kt)("h5",{id:"\u62a2\u5360\u4f18\u5148\u7ea7\u548c\u5b50\u4f18\u5148\u7ea7\u7684\u4f4d\u6570\u8bbe\u7f6e"},"\u62a2\u5360\u4f18\u5148\u7ea7\u548c\u5b50\u4f18\u5148\u7ea7\u7684\u4f4d\u6570\u8bbe\u7f6e"),(0,p.kt)("p",null,"\u7531GICC_BPR\u51b3\u5b9a\u62a2\u5360\u4f18\u5148\u7ea7\u548c\u5b50\u4f18\u5148\u7ea7\u5404\u5360\u591a\u5c11\u4f4d"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c393261ddac507cc669eea",alt:"image-20230728180629258"})),(0,p.kt)("h4",{id:"\u79fb\u690dsdkcore_ca7h"},"\u79fb\u690dSDKcore_ca7.h"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c3aa1a1ddac507cc8eb1a6",alt:"image-20230728194418711"})),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-assembly"},"/* IRQ\u4e2d\u65ad\uff01\u91cd\u70b9\uff01\uff01\uff01\uff01\uff01 */\nIRQ_Handler:\n    push {lr}                   /* \u4fdd\u5b58lr\u5730\u5740 */\n    push {r0-r3, r12}           /* \u4fdd\u5b58r0-r3\uff0cr12\u5bc4\u5b58\u5668 */\n\n    mrs r0, spsr                /* \u8bfb\u53d6spsr\u5bc4\u5b58\u5668 */\n    push {r0}                   /* \u4fdd\u5b58spsr\u5bc4\u5b58\u5668 */\n\n    mrc p15, 4, r1, c15, c0, 0 /* \u4eceCP15\u7684C0\u5bc4\u5b58\u5668\u5185\u7684\u503c\u5230R1\u5bc4\u5b58\u5668\u4e2d\n                                * \u53c2\u8003\u6587\u6863ARM Cortex-A(armV7)\u7f16\u7a0b\u624b\u518cV4.0.pdf P49\n                                * Cortex-A7 Technical ReferenceManua.pdf P68 P138\n                                */                          \n    add r1, r1, #0X2000         /* GIC\u57fa\u5730\u5740\u52a00X2000\uff0c\u4e5f\u5c31\u662fGIC\u7684CPU\u63a5\u53e3\u7aef\u57fa\u5730\u5740 */\n    ldr r0, [r1, #0XC]          /* GIC\u7684CPU\u63a5\u53e3\u7aef\u57fa\u5730\u5740\u52a00X0C\u5c31\u662fGICC_IAR\u5bc4\u5b58\u5668\uff0c\n                                 * GICC_IAR\u5bc4\u5b58\u5668\u4fdd\u5b58\u8fd9\u5f53\u524d\u53d1\u751f\u4e2d\u65ad\u7684\u4e2d\u65ad\u53f7\uff0c\u6211\u4eec\u8981\u6839\u636e\n                                 * \u8fd9\u4e2a\u4e2d\u65ad\u53f7\u6765\u7edd\u5bf9\u8c03\u7528\u54ea\u4e2a\u4e2d\u65ad\u670d\u52a1\u51fd\u6570\n                                 */\n    push {r0, r1}               /* \u4fdd\u5b58r0,r1 */\n    \n    cps #0x13                   /* \u8fdb\u5165SVC\u6a21\u5f0f\uff0c\u5141\u8bb8\u5176\u4ed6\u4e2d\u65ad\u518d\u6b21\u8fdb\u53bb */\n    \n    push {lr}                   /* \u4fdd\u5b58SVC\u6a21\u5f0f\u7684lr\u5bc4\u5b58\u5668 */\n    ldr r2, =system_irqhandler  /* \u52a0\u8f7dC\u8bed\u8a00\u4e2d\u65ad\u5904\u7406\u51fd\u6570\u5230r2\u5bc4\u5b58\u5668\u4e2d*/\n    blx r2                      /* \u8fd0\u884cC\u8bed\u8a00\u4e2d\u65ad\u5904\u7406\u51fd\u6570\uff0c\u5e26\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u4fdd\u5b58\u5728R0\u5bc4\u5b58\u5668\u4e2d */\n\n    pop {lr}                    /* \u6267\u884c\u5b8cC\u8bed\u8a00\u4e2d\u65ad\u670d\u52a1\u51fd\u6570\uff0clr\u51fa\u6808 */\n    cps #0x12                   /* \u8fdb\u5165IRQ\u6a21\u5f0f */\n    pop {r0, r1}                \n    str r0, [r1, #0X10]         /* \u4e2d\u65ad\u6267\u884c\u5b8c\u6210\uff0c\u5199EOIR */\n\n    pop {r0}                        \n    msr spsr_cxsf, r0           /* \u6062\u590dspsr */\n\n    pop {r0-r3, r12}            /* r0-r3,r12\u51fa\u6808 */\n    pop {lr}                    /* lr\u51fa\u6808 */\n    subs pc, lr, #4             /* \u5c06lr-4\u8d4b\u7ed9pc */\n    \n")),(0,p.kt)("p",null,"\u4eca\u65e5\u5728\u7406\u89e3\u8fd9\u4e2a\u4e2d\u65ad\u7684\u8fc7\u7a0b\u53d1\u73b0\u81ea\u5df1\u6709\u4e1c\u897f\u6f0f\u4e86\uff0c\u8fc7\u6765\u731b\u8865"),(0,p.kt)("p",null,"\u53ef\u4ee5\u5f97\u77e5\u4e2d\u65ad\u662f\u901a\u8fc7\u4e2d\u65ad\u53f7\u6765\u5224\u65ad\u7684\uff0c\u8fdb\u4e00\u6b65\u53d1\u73b0system_irqhandler\u6709\u4e2a\u5165\u53c2\u662f\u80fd\u7b97\u51fa\u4e2d\u65ad\u53f7\u7684"),(0,p.kt)("p",null,"\u4f46\u662f\uff0cC/assembly\u662f\u600e\u4e48\u628a\u53c2\u6570\u7a7f\u8fdb\u53bb\u7684\uff1f"),(0,p.kt)("p",null,"\u63a8\u8350\u94fe\u63a5\uff1a",(0,p.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/goldsunshine/p/14560301.html"},"\u4ece\u6c47\u7f16\u8bed\u8a00\u7684\u5bc4\u5b58\u5668\u6765\u770b\u51fd\u6570\u53c2\u6570\u4f20\u9012"),"\u4f46\u662f\u8001\u54e5\u7684assembly\u662fx86\u7684\u5427\uff1f\u53ef\u80fd\u6709\u70b9\u96be\u770b\u61c2"),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"\u6570\u636e\u4f20\u9012\u3001\u5c40\u90e8\u53d8\u91cf\u7684\u5206\u914d\u548c\u91ca\u653e\u901a\u8fc7\u64cd\u7eb5\u7a0b\u5e8f\u6808\u6765\u5b9e\u73b0\u3002\u4e3a\u51fd\u6570\u8c03\u7528\u5206\u914d\u7684\u90a3\u90e8\u5206\u6808\u79f0\u4e3a",(0,p.kt)("inlineCode",{parentName:"p"},"\u6808\u5e27"))),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/thammer/p/5303379.html"},"arm\u6c47\u7f16\u8fdb\u5165C\u51fd\u6570\u5206\u6790,C\u51fd\u6570\u538b\u6808\uff0c\u51fa\u6808\uff0c\u4f20\u53c2\uff0c\u8fd4\u56de\u503c - thammer")),(0,p.kt)("p",null,"\u53ef\u4ee5\u77e5\u9053\u7684\u662f\uff0c\u4f20\u53c2\u662f\u901a\u8fc7r0\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u5f00\u59cb\u7684\u3002"),(0,p.kt)("admonition",{type:"tip"},(0,p.kt)("p",{parentName:"admonition"},"\u6839\u636e ATPCS(ARM-Thumb Procedure Call Standard)\u5b9a\u4e49\u7684\u51fd\u6570\u53c2\u6570\u4f20\u9012\u89c4\u5219\uff0c\u5728\u6c47\u7f16\u8c03\u7528 C \u51fd\u6570\u7684\u65f6\u5019\u5efa\u8bae\u5f62\u53c2\u4e0d\u8981\u8d85\u8fc7 4 \u4e2a\uff0c\u5f62\u53c2\u53ef\u4ee5\u7531 r0~r3 \u8fd9\u56db\u4e2a\u5bc4\u5b58\u5668\u6765\u4f20\u9012\uff0c\u5982\u679c\u5f62\u53c2\u5927\u4e8e 4 \u4e2a\uff0c\u90a3\u4e48\u5927\u4e8e 4 \u4e2a\u7684\u90e8\u5206\u8981\u4f7f\u7528\u5806\u6808\u8fdb\u884c\u4f20\u9012\u3002")),(0,p.kt)("p",null,"\u518d\u770b\u770b\u6211\u4eec\u7684assembly"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-assembly"},"    mrc p15, 4, r1, c15, c0, 0 /* \u4eceCP15\u7684C0\u5bc4\u5b58\u5668\u5185\u7684\u503c\u5230R1\u5bc4\u5b58\u5668\u4e2d\n                                * \u53c2\u8003\u6587\u6863ARM Cortex-A(armV7)\u7f16\u7a0b\u624b\u518cV4.0.pdf P49\n                                * Cortex-A7 Technical ReferenceManua.pdf P68 P138\n                                */                          \n    add r1, r1, #0X2000         /* GIC\u57fa\u5730\u5740\u52a00X2000\uff0c\u4e5f\u5c31\u662fGIC\u7684CPU\u63a5\u53e3\u7aef\u57fa\u5730\u5740 */\n    ldr r0, [r1, #0XC]          /* GIC\u7684CPU\u63a5\u53e3\u7aef\u57fa\u5730\u5740\u52a00X0C\u5c31\u662fGICC_IAR\u5bc4\u5b58\u5668\uff0c\n")),(0,p.kt)("p",null,"\u7528\u5230\u4e86CP15\u5c06c0\u7684\u6570\u636e\u63d0\u5230r1\u4e86\uff0c\u8fd9\u4e2a\u662fGIC\u7684\u57fa\u5730\u5740\uff0c\u7136\u540e\u5728\u52a0\u4e0a0x2000\u5c31\u662fCPU\u63a5\u53e3\u7aef\u7684\u57fa\u5730\u5740\uff0c\u518d\u52a0\u4e0a0c\u5c31\u662fIAR\u5bc4\u5b58\u5668"),(0,p.kt)("p",null,"IAR\u5bc4\u5b58\u5668\u7684\u524d\u51e0\u4f4d\u662f\u4e2d\u65ad\u53f7"),(0,p.kt)("p",null,"\u79fb\u5230r0\uff0c\u5728\u8df3\u8f6c\u5230system_irqhandler\uff0c&\u4e0a\u524d\u51e0\u4f4d\u5c31\u662f\u4e2d\u65ad\u53f7\uff08\u524d\u51e0\u4f4d\u662fCPUID"),(0,p.kt)("p",null,"\u5904\u7406\u5b8c\u4e2d\u65ad\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u6536\u5c3e\u5de5\u4f5c"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-assembly"},"    pop {lr}                    /* \u6267\u884c\u5b8cC\u8bed\u8a00\u4e2d\u65ad\u670d\u52a1\u51fd\u6570\uff0clr\u51fa\u6808 */\n    cps #0x12                   /* \u8fdb\u5165IRQ\u6a21\u5f0f */\n    pop {r0, r1}                \n    str r0, [r1, #0X10]         /* \u4e2d\u65ad\u6267\u884c\u5b8c\u6210\uff0c\u5199EOIR */\n")),(0,p.kt)("p",null,"\u6211\u4eec\u56de\u5230\u4e86IRQ\u6a21\u5f0f\uff0c\u540c\u65f6\u5199\u5165EOIR"),(0,p.kt)("p",null,"\u4ec0\u4e48\u610f\u601d\uff1f"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c486441ddac507ccd08348",alt:"image-20230729112338701"})),(0,p.kt)("p",null,"\u901a\u8fc7\u9ad8\u4eae\u5904\u6211\u4eec\u5f97\u77e5\uff0c\u5f97\u5230\u6709\u6548\u7684\u7ec8\u7aef\u53f7\u540e\uff0c\u5fc5\u987b\u5199\u5165\u5bf9\u5e94\u7684\u4e2d\u65adID From GICC_IAR"),(0,p.kt)("p",null,"\u6240\u4ee5\u6211\u4eec\u6700\u540e \t",(0,p.kt)("inlineCode",{parentName:"p"},"str r0, [r1, #0X10]\t\t\t/* \u4e2d\u65ad\u6267\u884c\u5b8c\u6210\uff0c\u5199EOIR */"),"\uff08r1\u662fGICC\u57fa\u5730\u5740"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-assembly"},"    pop {r0}                        \n    msr spsr_cxsf, r0           /* \u6062\u590dspsr */\n\n    pop {r0-r3, r12}            /* r0-r3,r12\u51fa\u6808 */\n    pop {lr}                    /* lr\u51fa\u6808 */\n    subs pc, lr, #4             /* \u5c06lr-4\u8d4b\u7ed9pc */\n")),(0,p.kt)("p",null,"\u7136\u540e\u5c31\u662f\u8981\u6062\u590d\u73b0\u573a\u4e86\uff0c\u6211\u4eec\u5c06\u539f\u6765lr\uff08\u94fe\u63a5\u5bc4\u5b58\u5668\uff09\u51fa\u6808\uff0c\u7136\u540e\u5c06lr-4(\u53d6\u6307\u90e8\u5206)\u63d0\u51fa\u6765"),(0,p.kt)("p",null,"\uff08\u4e0d\u597d\u8bc4\u4ef7\uff0c\u5982\u679c\u6211\u4e0d\u662f\u53d6\u6307\u5462\uff1f"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://pic.imgdb.cn/item/64c492531ddac507cce31c0e",alt:"image-20230729121512844"})))}o.isMDXComponent=!0}}]);